<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/Screen/Screen.js | minnow-engine</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="A game engine for low resolution games."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="minnow-engine"><meta property="twitter:description" content="A game engine for low resolution games."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/byersdz/minnow-engine"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Keys">Keys</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#audio">Audio</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Audio/Audio.js~Audio.html">Audio</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Audio/Sound.js~Sound.html">Sound</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Notes">Notes</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#engine">Engine</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Engine/Engine.js~Engine.html">Engine</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#fontdata">FontData</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/FontData/Font.js~Font.html">Font</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/FontData/FontData.js~FontData.html">FontData</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#input">Input</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Input/Input.js~Input.html">Input</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_ACTION_FOUR">GAME_ACTION_FOUR</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_ACTION_ONE">GAME_ACTION_ONE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_ACTION_THREE">GAME_ACTION_THREE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_ACTION_TWO">GAME_ACTION_TWO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_DOWN">GAME_DOWN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_LEFT">GAME_LEFT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_LEFT_TRIGGER">GAME_LEFT_TRIGGER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_PAUSE">GAME_PAUSE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_RIGHT">GAME_RIGHT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_RIGHT_TRIGGER">GAME_RIGHT_TRIGGER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GAME_UP">GAME_UP</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MENU_BACK">MENU_BACK</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MENU_CONFIRM">MENU_CONFIRM</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MENU_DOWN">MENU_DOWN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MENU_LEFT">MENU_LEFT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MENU_RIGHT">MENU_RIGHT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MENU_UP">MENU_UP</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ADD">ADD</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ALT">ALT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-A_KEY">A_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-BACKSPACE">BACKSPACE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-BACK_SLASH">BACK_SLASH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-B_KEY">B_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CAPSLOCK">CAPSLOCK</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CLOSE_BRACKET">CLOSE_BRACKET</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-COMMA">COMMA</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CTRL">CTRL</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-C_KEY">C_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DASH">DASH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DECIMAL_POINT">DECIMAL_POINT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DELETE">DELETE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DIVIDE">DIVIDE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DOWN_ARROW">DOWN_ARROW</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-D_KEY">D_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EIGHT">EIGHT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-END">END</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ENTER">ENTER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EQUAL_SIGN">EQUAL_SIGN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ESCAPE">ESCAPE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-E_KEY">E_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F1">F1</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F10">F10</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F11">F11</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F12">F12</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F2">F2</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F3">F3</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F4">F4</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F5">F5</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F6">F6</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F7">F7</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F8">F8</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F9">F9</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FIVE">FIVE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FORWARD_SLASH">FORWARD_SLASH</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FOUR">FOUR</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-F_KEY">F_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-GRAVE_ACCENT">GRAVE_ACCENT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-G_KEY">G_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HOME">HOME</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-H_KEY">H_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-INSERT">INSERT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-I_KEY">I_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-J_KEY">J_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-K_KEY">K_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-LEFT_ARROW">LEFT_ARROW</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-LEFT_WINDOW">LEFT_WINDOW</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-L_KEY">L_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MULTIPLY">MULTIPLY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-M_KEY">M_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NINE">NINE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_EIGHT">NUM_EIGHT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_FIVE">NUM_FIVE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_FOUR">NUM_FOUR</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_LOCK">NUM_LOCK</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_NINE">NUM_NINE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_ONE">NUM_ONE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_SEVEN">NUM_SEVEN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_SIX">NUM_SIX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_THREE">NUM_THREE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_TWO">NUM_TWO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NUM_ZERO">NUM_ZERO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-N_KEY">N_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ONE">ONE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-OPEN_BRACKET">OPEN_BRACKET</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-O_KEY">O_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PAGE_DOWN">PAGE_DOWN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PAGE_UP">PAGE_UP</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PAUSE_BREAK">PAUSE_BREAK</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PERIOD">PERIOD</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-P_KEY">P_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Q_KEY">Q_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RIGHT_ARROW">RIGHT_ARROW</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RIGHT_WINDOW">RIGHT_WINDOW</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-R_KEY">R_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SCROLL_LOCK">SCROLL_LOCK</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SELECT">SELECT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SEMI_COLON">SEMI_COLON</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SEVEN">SEVEN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SHIFT">SHIFT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SINGLE_QUOTE">SINGLE_QUOTE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SIX">SIX</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SPACE">SPACE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SUBTRACT">SUBTRACT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-S_KEY">S_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TAB">TAB</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-THREE">THREE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TWO">TWO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-T_KEY">T_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-UP_ARROW">UP_ARROW</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-U_KEY">U_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-V_KEY">V_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-W_KEY">W_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-X_KEY">X_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Y_KEY">Y_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ZERO">ZERO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Z_KEY">Z_KEY</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-codesToKeyCodes">codesToKeyCodes</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#mapdata">MapData</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/MapData/MapData.js~MapData.html">MapData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/MapData/TileMap.js~TileMap.html">TileMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-BG1_LAYER">BG1_LAYER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-BG2_LAYER">BG2_LAYER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-BG3_LAYER">BG3_LAYER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-COLLISION_LAYER">COLLISION_LAYER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FG1_LAYER">FG1_LAYER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FG2_LAYER">FG2_LAYER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FG3_LAYER">FG3_LAYER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MAIN_LAYER">MAIN_LAYER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-META_LAYER">META_LAYER</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#screen">Screen</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Screen/Screen.js~Screen.html">Screen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SCALE_CONSTANT">SCALE_CONSTANT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SCALE_FIT_WINDOW">SCALE_FIT_WINDOW</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#tiledata">TileData</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/TileData/TileData.js~TileData.html">TileData</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/Screen/Screen.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">
export const SCALE_CONSTANT = 1;
export const SCALE_FIT_WINDOW = 2;

/**
 * Represents a game screen for low resolution games.
 * Has simple drawing functions using an indexed palette of a maximum of 256 colors
 * The origin (0, 0) position of the screen is on the bottom left
 */
class Screen {
  constructor() {
    this.conainerId = &apos;minnow-container&apos;;
    this.container = null;
    this.width = 320;
    this.height = 180;
    this.scale = 3;
    this.maxScale = -1;
    this.minScale = 1;
    this.scaleMode = SCALE_CONSTANT;
    this.horizontalScaleCushion = 0;
    this.verticalScaleCushion = 0;
    this.rescaleOnWindowResize = true;
    this.hideCursor = false;
    this.tileData = null;
    this.mapData = null;
    this.fontData = null;

    this.onScaleChange = null;

    this.canvas = null;
    this._context = null;
    this._imageData = null;
    this._screenData = null;
    this._palette = null;
    this._generatedPalette = null;

    this._isLittleEndian = true;
  }

  /**
   * Do initial setup such as creating the canvas and building the palette
   */
  init() {
    this.container = document.getElementById( this.conainerId );

    this.canvas = document.createElement( &apos;canvas&apos; );
    this.canvas.setAttribute( &apos;id&apos;, &apos;game-device&apos; );
    this.canvas.setAttribute( &apos;width&apos;, this.width );
    this.canvas.setAttribute( &apos;height&apos;, this.height );

    this._setScale();

    if ( this.rescaleOnWindowResize &amp;&amp; this.scaleMode !== SCALE_CONSTANT ) {
      window.onresize = () =&gt; {
        this._setScale();
        this._setCanvasStyle();
      };
    }

    this._setCanvasStyle();

    this.container.appendChild( this.canvas );

    this._context = this.canvas.getContext( &apos;2d&apos;, { alpha: false } );
    this._context.imageSmoothingEnabled = false;
    this._screenData = new Uint8ClampedArray( this.width * this.height );
    this._imageData = this._context.getImageData( 0, 0, this.width, this.height );

    // check if we are little endian
    const buffer = new ArrayBuffer( 4 );
    const test8 = new Uint8ClampedArray( buffer );
    const test32 = new Uint32Array( buffer );
    test32[0] = 0x0a0b0c0d;

    if ( test8[0] === 0x0a
      &amp;&amp; test8[1] === 0x0b
      &amp;&amp; test8[2] === 0x0c
      &amp;&amp; test8[3] === 0x0d
    ) {
      this._isLittleEndian = false;
    }

    if ( !this._palette ) {
      // set the default palette
      this._palette = [
        [0x00, 0x00, 0x00],
        [0x00, 0x00, 0x00],
        [0xff, 0xff, 0xff],
        [0xff, 0x00, 0x00],
        [0x00, 0xff, 0x00],
        [0x00, 0x00, 0xff],
      ];
    }

    this._buildPalette();
  }

  _setScale() {
    if ( this.scaleMode === SCALE_FIT_WINDOW ) {
      const maxWidth = window.innerWidth - this.horizontalScaleCushion;
      const maxHeight = window.innerHeight - this.verticalScaleCushion;

      const maxHorizScale = Math.floor( maxWidth / this.width );
      const maxVerticalScale = Math.floor( maxHeight / this.height );

      this.scale = maxHorizScale &lt; maxVerticalScale ? maxHorizScale : maxVerticalScale;
      if ( this.scale &lt; this.minScale ) {
        this.scale = this.minScale;
      }
      if ( this.maxScale &gt; 0 &amp;&amp; this.scale &gt; this.maxScale ) {
        this.scale = this.maxScale;
      }
    }

    if ( this.onScaleChange ) {
      this.onScaleChange( this.scale );
    }
  }

  _setCanvasStyle() {
    let containerStyle = &apos;&apos;;
    containerStyle += `width: ${ this.width * this.scale }px;`;
    containerStyle += `height: ${ this.height * this.scale }px;`;

    this.container.setAttribute( &apos;style&apos;, containerStyle );

    let canvasStyle = &apos;&apos;;
    canvasStyle += &apos;transform-origin: 50% 0%;&apos;;
    canvasStyle += `transform: scale(${ this.scale });`;
    canvasStyle += &apos;image-rendering: -webkit-optimize-contrast;&apos;;
    canvasStyle += &apos;image-rendering: -moz-crisp-edges;&apos;;
    canvasStyle += &apos;image-rendering: crisp-edges;&apos;;
    canvasStyle += &apos;image-rendering: pixelated;&apos;;


    if ( this.hideCursor ) {
      canvasStyle += &apos;cursor: none&apos;;
    }

    this.canvas.setAttribute( &apos;style&apos;, canvasStyle );
  }

  /**
   * Set the palette that will used by the Screen.
   * All colors are drawn fully opaque exept for the palette index at 0 which is transparent
   *
   * @example
   * const palette = [
   *  [0, 0, 0], // black, the 0 index is transparent
   *  [0, 0, 0], // black
   *  [255, 255, 255], // white
   *  [255, 0, 0], // red
   *  [0, 255, 0], // green
   *  [0, 0, 255] // blue
   * ];
   *
   * screen.setPalette( palette );
   *
   * @param {Array.&lt;Array.&lt;number&gt;} palette - The array of colors to be used by the screen.
   * Each index should be a color described by an array of 3 integers in rgb order.
   * Each integer has a min value of 0 and a max value of 255.
   */
  setPalette( palette ) {
    this._palette = palette;
    this._buildPalette();
  }

  /**
   * Change a single palette color
   *
   * @param {number[]} color - The color we want to add
   * @param {number} index - this palette index we want to set
   */
  setPaletteColorAtIndex( color, index ) {
    this._palette[index] = color;
    this._buildPalette();
  }

  /**
   * Build the palette by converting _palette to the _generatedPalette we will be using internally
   */
  _buildPalette() {
    this._generatedPalette = new Uint32Array( this._palette.length );
    let currentColor = null;
    if ( this._isLittleEndian ) {
      for ( let i = 0; i &lt; this._palette.length; i += 1 ) {
        currentColor = this._palette[i];
        this._generatedPalette[i] = (
          ( 255 &lt;&lt; 24 ) // a
          | ( currentColor[2] &lt;&lt; 16 ) // b
          | ( currentColor[1] &lt;&lt; 8 ) // g
          | currentColor[0] // r
        );
      }
    }
    else {
      for ( let i = 0; i &lt; this._palette.length; i += 1 ) {
        currentColor = this._palette[i];
        this._generatedPalette[i] = (
          ( currentColor[0] &lt;&lt; 24 ) // r
          | ( currentColor[1] &lt;&lt; 16 ) // g
          | ( currentColor[2] &lt;&lt; 8 ) // b
          | 255 // a
        );
      }
    }
  }

  /**
   * Set a pixel on the screen.
   * The origin (0, 0) of the screen is on the bottom left
   * @param {number} x - x position
   * @param {number} y - y position
   * @param {number} paletteId - palette color index
   */
  setPixel( x, y, paletteId ) {
    if ( !paletteId ) {
      return;
    }
    if ( x &lt; 0 || x &gt;= this.width || y &lt; 0 || y &gt;= this.height ) {
      return;
    }
    this._screenData[y * this.width + x] = paletteId;
  }

  /**
   * Set a pixel on the screen, without doing any bounds checking
   * @param {number} x - x position
   * @param {number} y - y position
   * @param {number} paletteId - palette color index
   */
  setPixelUnsafe( x, y, paletteId ) {
    if ( !paletteId ) {
      return;
    }
    this._screenData[y * this.width + x] = paletteId;
  }

  /**
   * Get the pallete index at a given position on the screen
   * @param {*} x - x position
   * @param {*} y - y position
   */
  getPixel( x, y ) {
    return this._screenData[y * this.width + x];
  }

  /**
   * Fill the screen with the given palette index
   * @param {*} paletteId - the palette index / defaults to 0 if unspecified
   */
  clear( paletteId ) {
    if ( paletteId ) {
      this._screenData.fill( paletteId );
    }
    else {
      this._screenData.fill( 0 );
    }
  }

  /**
   * Draw a line between 2 positions
   * @param {*} x1 - first x position
   * @param {*} y1 - first y position
   * @param {*} x2 - second x position
   * @param {*} y2 - second y position
   * @param {*} paletteId - palette index to be drawn
   */
  drawLine( x1, y1, x2, y2, paletteId ) {
    if ( x1 === x2 &amp;&amp; y1 === y2 ) {
      // same coordinate, draw a pixel
      this.setPixel( x1, x2, paletteId );
      return;
    }

    if ( x1 === x2 ) {
      // vertical line
      if ( x1 &lt; 0 || x1 &gt;= this.width ) {
        return;
      }

      let firstY = y1 &lt; y2 ? y1 : y2;
      let secondY = y1 &lt; y2 ? y2 : y1;
      if ( secondY &lt; 0 ) {
        return;
      }
      if ( firstY &gt;= this.height ) {
        return;
      }

      if ( firstY &lt; 0 ) {
        firstY = 0;
      }
      if ( secondY &gt;= this.height ) {
        secondY = this.height - 1;
      }
      for ( let currentY = firstY; currentY &lt;= secondY; currentY += 1 ) {
        this.setPixelUnsafe( x1, currentY, paletteId );
      }

      return;
    }

    if ( y1 === y2 ) {
      // horizontal line
      if ( y1 &lt; 0 || y1 &gt;= this.height ) {
        return;
      }

      let firstX = x1 &lt; x2 ? x1 : x2;
      let secondX = x1 &lt; x2 ? x2 : x1;
      if ( secondX &lt; 0 ) {
        return;
      }
      if ( firstX &gt;= this.width ) {
        return;
      }

      if ( firstX &lt; 0 ) {
        firstX = 0;
      }
      if ( secondX &gt;= this.width ) {
        secondX = this.width - 1;
      }
      for ( let currentX = firstX; currentX &lt;= secondX; currentX += 1 ) {
        this.setPixelUnsafe( currentX, y1, paletteId );
      }

      return;
    }

    if ( Math.abs( y2 - y1 ) &lt; Math.abs( x2 - x1 ) ) {
      // slope is less than 1
      if ( x1 &gt; x2 ) {
        this._drawLineLow( x2, y2, x1, y1, paletteId );
      }
      else {
        this._drawLineLow( x1, y1, x2, y2, paletteId );
      }
    }
    else {
      // slope is greater than 1
      if ( y1 &gt; y2 ) {
        this._drawLineHigh( x2, y2, x1, y1, paletteId );
      }
      else {
        this._drawLineHigh( x1, y1, x2, y2, paletteId );
      }
    }
  }

  /**
   * Draw a line with a slope less than or equal to 1
   */
  _drawLineLow( x1, y1, x2, y2, id ) {
    const dx = x2 - x1;
    let dy = y2 - y1;
    let yIncrement = 1;
    if ( dy &lt; 0 ) {
      yIncrement = -1;
      dy = -dy;
    }

    let decision = 2 * dy - dx;
    let y = y1;

    for ( let x = x1; x &lt;= x2; x += 1 ) {
      this.setPixel( x, y, id );

      if ( decision &gt; 0 ) {
        y += yIncrement;
        decision = decision - ( 2 * dx );
      }

      decision = decision + ( 2 * dy );
    }
  }

  /**
   * Draw a line with a slope greater than 1
   */
  _drawLineHigh( x1, y1, x2, y2, id ) {
    let dx = x2 - x1;
    const dy = y2 - y1;
    let xIncrement = 1;
    if ( dx &lt; 0 ) {
      xIncrement = -1;
      dx = -dx;
    }

    let decision = 2 * dx - dy;
    let x = x1;

    for ( let y = y1; y &lt;= y2; y += 1 ) {
      this.setPixel( x, y, id );

      if ( decision &gt; 0 ) {
        x += xIncrement;
        decision = decision - ( 2 * dy );
      }

      decision = decision + ( 2 * dx );
    }
  }

  /**
   * Draw a filled rectangle
   *
   * @param {*} x - bottom left x position
   * @param {*} y - bottom left y position
   * @param {*} width - width of the rectangle
   * @param {*} height - height of the rectangle
   * @param {*} paletteId - the palette color to draw
   */
  drawRect( x, y, width, height, paletteId ) {
    if ( x &gt;= this.width ) {
      return;
    }

    if ( y &gt;= this.height ) {
      return;
    }

    let x1 = x;
    let y1 = y;
    let x2 = x + width - 1;
    let y2 = y + height - 1;

    if ( x2 &lt; 0 ) {
      return;
    }
    if ( y2 &lt; 0 ) {
      return;
    }

    if ( x1 &lt; 0 ) {
      x1 = 0;
    }
    if ( y1 &lt; 0 ) {
      y1 = 0;
    }

    if ( x2 &gt;= this.width ) {
      x2 = this.width - 1;
    }

    if ( y2 &gt;= this.height ) {
      y2 = this.height - 1;
    }

    for ( let currentY = y1; currentY &lt;= y2; currentY += 1 ) {
      for ( let currentX = x1; currentX &lt;= x2; currentX += 1 ) {
        this.setPixelUnsafe( currentX, currentY, paletteId );
      }
    }
  }

  /**
   * Draw a rectangle border
   *
   * @param {*} x - bottom left x position
   * @param {*} y - bottom left y position
   * @param {*} width - width of the rectangle
   * @param {*} height - height of the rectangle
   * @param {*} paletteId - the palette color to draw
   */
  drawRectBorder( x, y, width, height, paletteId ) {
    if ( x &gt;= this.width ) {
      return;
    }

    if ( y &gt;= this.height ) {
      return;
    }

    if ( width === 1 &amp;&amp; height === 1 ) {
      this.setPixel( x, y, paletteId );
      return;
    }

    const x2 = x + width - 1;
    const y2 = y + height - 1;

    if ( x2 &lt; 0 ) {
      return;
    }
    if ( y2 &lt; 0 ) {
      return;
    }

    if ( width === 1 ) {
      this.drawLine( x, y, x, y2, paletteId );
      return;
    }

    if ( height === 1 ) {
      this.drawLine( x, y, x2, y, paletteId );
      return;
    }

    this.drawLine( x, y, x, y2, paletteId ); // left
    this.drawLine( x, y2, x2, y2, paletteId ); // top
    this.drawLine( x2, y2, x2, y, paletteId ); // right
    this.drawLine( x2, y, x, y, paletteId ); // bottom
  }

  /**
   * Draw a filled circle
   *
   * @param {number} centerX - the x coordinate of the center of the circle
   * @param {numbe} centerY -  the y coordinate of the center of the circle
   * @param {number} radius - the radius of the circle
   * @param {number} paletteId - the palette color to draw
   */
  drawCircle( centerX, centerY, radius, paletteId ) {
    if ( radius &lt;= 0 ) {
      return;
    }

    if ( radius === 1 ) {
      this.drawCircleBorder( centerX, centerY, radius, paletteId );
      this.setPixel( centerX, centerY, paletteId );
      return;
    }

    let x = 0;
    let y = radius;
    this.drawLine( centerX - radius, centerY, centerX + radius, centerY, paletteId );

    let decision = 3 - 2 * radius;

    while ( y &gt;= x ) {
      x += 1;

      if ( decision &gt; 0 ) {
        y -= 1;
        decision = decision + 4 * ( x - y ) + 10;
      }
      else {
        decision = decision + 4 * x + 6;
      }

      this._drawCircleFilledOctants( centerX, centerY, x, y, paletteId );
    }
  }

  /**
   * Draw a circle border
   *
   * @param {number} centerX - the x coordinate of the center of the circle
   * @param {numbe} centerY -  the y coordinate of the center of the circle
   * @param {number} radius - the radius of the circle
   * @param {number} paletteId - the palette color to draw
   */
  drawCircleBorder( centerX, centerY, radius, paletteId ) {
    if ( radius &lt;= 0 ) {
      return;
    }

    let x = 0;
    let y = radius;
    this._drawCircleBorderOctants( centerX, centerY, x, y, paletteId );

    let decision = 3 - 2 * radius;

    while ( y &gt;= x ) {
      x += 1;

      if ( decision &gt; 0 ) {
        y -= 1;
        decision = decision + 4 * ( x - y ) + 10;
      }
      else {
        decision = decision + 4 * x + 6;
      }

      this._drawCircleBorderOctants( centerX, centerY, x, y, paletteId );
    }
  }

  /**
   * helper method for drawing filled circles
   */
  _drawCircleFilledOctants( centerX, centerY, x, y, paletteId ) {
    this.drawLine( centerX - x, centerY + y, centerX + x, centerY + y, paletteId );
    this.drawLine( centerX - x, centerY - y, centerX + x, centerY - y, paletteId );
    this.drawLine( centerX - y, centerY + x, centerX + y, centerY + x, paletteId );
    this.drawLine( centerX - y, centerY - x, centerX + y, centerY - x, paletteId );
  }

  /**
   * helper method for drawing circle borders
   */
  _drawCircleBorderOctants( centerX, centerY, x, y, paletteId ) {
    this.setPixel( centerX + x, centerY + y, paletteId );
    this.setPixel( centerX - x, centerY + y, paletteId );
    this.setPixel( centerX + x, centerY - y, paletteId );
    this.setPixel( centerX - x, centerY - y, paletteId );
    this.setPixel( centerX + y, centerY + x, paletteId );
    this.setPixel( centerX - y, centerY + x, paletteId );
    this.setPixel( centerX + y, centerY - x, paletteId );
    this.setPixel( centerX - y, centerY - x, paletteId );
  }

  /**
   * Draw a tile
   * @param {number} gid - the gid of the tile
   * @param {*} x - the x position on the screen
   * @param {*} y - the y position on the screen
   */
  drawTile( gid, x, y ) {
    if ( !gid ) {
      return;
    }

    if ( x &gt;= this.width ) {
      return;
    }

    if ( y &gt;= this.height ) {
      return;
    }

    const { tileSize } = this.tileData;

    if ( x + tileSize &lt; 0 ) {
      return;
    }

    if ( y + tileSize &lt; 0 ) {
      return;
    }

    const basePosition = ( gid - 1 ) * tileSize * tileSize;
    for ( let tileY = 0; tileY &lt; tileSize; tileY += 1 ) {
      for ( let tileX = 0; tileX &lt; tileSize; tileX += 1 ) {
        const paletteId = this.tileData.data[basePosition + tileY * tileSize + tileX];
        this.setPixel( x + tileX, y + tileY, paletteId );
      }
    }
  }

  /**
   * Draw a TileMap layer to the screen
   * @param {number} x - origin x position on the TileMap
   * @param {number} y - origin y position on the TileMap
   * @param {number} width - how many tiles wide to draw
   * @param {number} height - how many tiles high to draw
   * @param {number} screenX - origin x position on the screen
   * @param {number} screenY - origin y position on the screen
   * @param {number} map - the index of the tilemap to draw
   * @param {number} layer - the index of the layer to draw
   */
  drawMap( x, y, width, height, screenX, screenY, map = 0, layer = 0 ) {
    const tileMap = this.mapData.tileMaps[map];
    const layerData = tileMap.layers[layer];
    const { tileSize } = this.tileData;
    let maxX = x + width;
    let maxY = y + height;

    if ( maxX &gt;= tileMap.width ) {
      maxX = tileMap.width - 1;
    }
    if ( maxY &gt;= tileMap.height ) {
      maxY = tileMap.height - 1;
    }

    for ( let currentY = y; currentY &lt;= maxY; currentY += 1 ) {
      for ( let currentX = x; currentX &lt;= maxX; currentX += 1 ) {
        const gid = layerData[currentY * tileMap.width + currentX];
        if ( gid ) {
          this.drawTile( gid, screenX + currentX * tileSize, screenY + currentY * tileSize );
        }
      }
    }
  }

  /**
   * Draw a line of text to the screen.
   * Newlines are not supported, this will draw just a single line
   * @param {string} text - the text to draw
   * @param {number} x - the x position on the screen to draw to
   * @param {number} y - the y position on the screen to draw to
   * @param {number} paletteId - the palette if for the main color
   * @param {number} outlinePaletteId - the palette id for the outline color
   * @param {number} font - the index of the font to use
   */
  drawText( text, x, y, paletteId, outlinePaletteId = 0, font = 0 ) {
    const currentFont = this.fontData.fonts[font];
    let currentX = x;
    for ( let i = 0; i &lt; text.length; i += 1 ) {
      const charCode = text.charCodeAt( i );
      this.drawChar( charCode, currentX, y, paletteId, outlinePaletteId, font );
      currentX += currentFont.widthForChar( charCode );
      currentX += currentFont.letterSpacing;
    }
  }

  /**
   * Draw an individual character to the screen
   * @param {number} charCode - the unicode point to draw
   * @param {number} x - the x position on the screen to draw to
   * @param {number} y - the y position on the screen to draw to
   * @param {number} paletteId - the palette id for the main color
   * @param {number} outlinePaletteId - the palette id for the outline color
   * @param {number} font - the index of the font to use
   */
  drawChar( charCode, x, y, paletteId, outlinePaletteId = 0, font = 0 ) {
    const currentFont = this.fontData.fonts[font];
    const { tileSize, originX, originY } = currentFont;
    const basePosition = currentFont.baseIndexForChar( charCode );
    for ( let fontY = 0; fontY &lt; tileSize; fontY += 1 ) {
      for ( let fontX = 0; fontX &lt; tileSize; fontX += 1 ) {
        const id = currentFont.data[basePosition + fontY * tileSize + fontX];
        if ( id === 1 ) {
          this.setPixel( x + fontX - originX, y + fontY - originY, paletteId );
        }
        else if ( id === 2 ) {
          this.setPixel( x + fontX - originX, y + fontY - originY, outlinePaletteId );
        }
      }
    }
  }

  /**
   * draw the data from {@link _screenData} to the canvas
   */
  drawScreen() {
    const buffer = new ArrayBuffer( this._imageData.data.length );
    const data8 = new Uint8ClampedArray( buffer );
    const data32 = new Uint32Array( buffer );

    let index = 0;
    let screenY = 0;
    for ( let y = 0; y &lt; this.height; y += 1 ) {
      for ( let x = 0; x &lt; this.width; x += 1 ) {
        screenY = this.height - y - 1; // origin from top left to bottom left
        index = this._screenData[screenY * this.width + x];
        data32[y * this.width + x] = this._generatedPalette[index];
      }
    }
    this._imageData.data.set( data8 );
    this._context.putImageData( this._imageData, 0, 0 );
  }
}

export default Screen;
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
